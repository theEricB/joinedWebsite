<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>dream</title>
		<style>
			body, html{ 
                margin: 0;
                overflow-x: hidden; 
                overflow-y: hidden; 
                background-color: black;
            }
		</style>

	</head>
	

    <body>

          
        <div style="color: aliceblue; z-index: 10; width: 90vw; top: 0; margin-top: 30px; margin-left: 20px; position: fixed; font-family: Arial, Helvetica, sans-serif;">
            <h2>latent space</h2>
        </div>
        <div style="color: aliceblue; z-index: 10; width: 90vw; top: 0; margin-top: 30px; margin-left: 34%; position: fixed; font-family: Arial, Helvetica, sans-serif;">
            <h2>generated 3d model</h2>
        </div>
        <div id="controls" style=" z-index: 10; width: 90vw; bottom: 0; margin-bottom: 30px; position: fixed;">
        <div id="zoom"><input id="sliderX" type="range" min="0" max="1" step="0.001" value="0.5" style="width: 50%; margin-left: 50%;"></div>
            <div id="zoom"><input id="sliderY" type="range" min="0" max="1" step="0.001" value="0.5" style="width: 50%; margin-left: 50%;"></div>
            <div id="zoom"><input id="sliderZ" type="range" min="0" max="1" step="0.001" value="0.5" style="width: 50%; margin-left: 50%;"></div>
        </div>

        <div style="display: flex;">
            <div id="latentSpace"></div>
            <div id="dream"></div>
        </div>

        <script src="https://cdn.jsdelivr.net/npm/onnxjs/dist/onnx.min.js"></script>
        <script type="importmap">
            {
            "imports": {
                "three": "https://unpkg.com/three@v0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@v0.160.0/examples/jsm/"
            }
            }
        </script>
        <script type="module">

            function getCenterPoint(mesh) {
                var middle = new THREE.Vector3();
                var geometry = mesh.geometry;
                middle.x = (geometry.boundingBox.max.x + geometry.boundingBox.min.x) / 2;
                middle.y = (geometry.boundingBox.max.y + geometry.boundingBox.min.y) / 2;
                middle.z = (geometry.boundingBox.max.z + geometry.boundingBox.min.z) / 2;
                mesh.localToWorld( middle );
                return middle;
            }

            async function decode(input) {
                const sess = new onnx.InferenceSession()
                await sess.loadModel('./src/thesis/onnx_model.onnx')
                const outputMap = await sess.run([input])
                const outputTensor = outputMap.values().next().value.data
                return outputTensor;
            }

            import * as THREE from 'three';
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera( 40, (window.innerWidth/3*2) / window.innerHeight, 0.1, 1000 );

            const renderer = new THREE.WebGLRenderer();
            renderer.shadowMap.enabled = true;
            renderer.shadowMap.type = THREE.PCFSoftShadowMap; // default THREE.PCFShadowMap
            renderer.setSize( window.innerWidth/3*2, window.innerHeight );
            document.getElementById("dream").appendChild( renderer.domElement );

            const controls = new OrbitControls( camera, renderer.domElement );
            camera.position.set(20,10,25);
            camera.lookAt(new THREE.Vector3(0,0,0));

            const material = new THREE.MeshLambertMaterial();
            material.transparent = true
            material.opacity = 0.8

            for (let i = 0; i < 21; i++) {
                const box = new THREE.BoxGeometry( 1, 0.05, 1 );
                const cube = new THREE.Mesh( box, material );
                cube.receiveShadow = true;
				cube.castShadow = true;
                scene.add( cube );
            }
            
            const axesHelper = new THREE.AxesHelper( 5 );
            scene.add( axesHelper );  

            scene.add( new THREE.AmbientLight( 0xaaaaaa, 0.6 ) );
            const light = new THREE.DirectionalLight( 0xddffdd, 2 );
            light.position.set( 10, 10, 5 );
            light.castShadow = true;
            light.shadow.mapSize.width = 1024;
            light.shadow.mapSize.height = 1024;

            const d = 10;

            light.shadow.camera.left = - d;
            light.shadow.camera.right = d;
            light.shadow.camera.top = d;
            light.shadow.camera.bottom = - d;
            light.shadow.camera.far = 1000;
	
            scene.add( light );
            let mid = new THREE.Vector3(0,0,0);
            async function animate() {
                const slidX = document.getElementById("sliderX").value
                const slidY = document.getElementById("sliderY").value
                const slidZ = document.getElementById("sliderZ").value
 

                const input = new onnx.Tensor(new Float32Array([slidX,slidY,slidZ]), "float32", [1,3]);
                let geo = await decode(input);
                const centers = [];
                for (let i = 0; i < 21; i++) {
                    let ind = i+i*6;

                    let x = geo[ind];
                    let y = geo[ind+1];
                    let z = geo[ind+2];

                    let plane = parseInt(Math.round(geo[ind+3]));
                    let width = geo[ind+4];
                    let height = geo[ind+5];

                    if(plane == 1){
                        scene.children[i].rotation.x = Math.PI/2
                    }
                    if(plane == 2){
                        scene.children[i].rotation.z = Math.PI/2
                    }
                    scene.children[i].position.x = x
                    scene.children[i].position.y = z
                    scene.children[i].position.z = y

                    scene.children[i].scale.x = width*2
                    scene.children[i].scale.z = height*2

                    centers.push(x, y, z);
                    
                }

                const bounding = new THREE.BufferGeometry();
                bounding.setAttribute( 'position', new THREE.Float32BufferAttribute( centers, 3 ) );
                bounding.computeBoundingBox();
                const material = new THREE.PointsMaterial( {size: .05} );
                const points = new THREE.Points( bounding, material );
                mid = getCenterPoint(points);

                for (let i = 0; i < 21; i++) {
                    let ind = i+i*6;
                    scene.children[i].position.x -= mid.x
                    scene.children[i].position.y -= mid.y
                    scene.children[i].position.z -= mid.z
                }



                requestAnimationFrame( animate );
                renderer.render( scene, camera );
            }
            animate();

        </script>

        <script type="module">
            const latentCoordinates = [
                [0,0,0],
                [0,1,0],
                [0,0,1],
                [1,1,1],
                [0.4822676 ,0.49123627,0.44303644],
                [0.45967686,0.51163733,0.43174356],
                [0.48036984,0.4928298 ,0.44332927],
                [0.51035494,0.47591546,0.42298773],
                [0.50093544,0.51196134,0.45678478],
                [0.45567694,0.52065396,0.43621072],
                [0.51018786,0.48086736,0.41740564],
                [0.52491295,0.47994483,0.41460416],
                [0.47086632,0.5275411 ,0.4258453 ],
                [0.45636985,0.5297524 ,0.43550172],
                [0.53237784,0.47629887,0.41945413],
                [0.50941455,0.48041034,0.4216342 ],
                [0.46881285,0.5292803 ,0.43080422],
                [0.4842228 ,0.48557937,0.44612718],
                [0.5282509 ,0.44234025,0.40986106],
                [0.5272916 ,0.43838474,0.406776  ],
                [0.50804734,0.4504284 ,0.38238385],
                [0.48321435,0.48942977,0.4488675 ],
                [0.5226631 ,0.44486955,0.41492137],
                [0.52559954,0.44133082,0.4125244 ],
                [0.54521984,0.4582201 ,0.37657562],
                [0.478412  ,0.49649307,0.43585697],
                [0.45543036,0.51428324,0.4264763 ],
                [0.48450053,0.4928684 ,0.44170702],
                [0.51879424,0.48570877,0.41977328],
                [0.49966654,0.51502067,0.45405236],
                [0.45583215,0.5241126 ,0.42789435],
                [0.486381  ,0.4870284 ,0.44122347],
                [0.5119739 ,0.48551968,0.42578468],
                [0.47817594,0.531338  ,0.43017337],
                [0.4596281 ,0.51804113,0.4440729 ],
                [0.5091224 ,0.49202564,0.4221447 ],
                [0.5157893 ,0.48850536,0.41498747],
                [0.46929505,0.5282746 ,0.42509702],
                [0.45231876,0.52025765,0.42778155],
                [0.5282453 ,0.442986  ,0.41303018],
                [0.5265152 ,0.44767448,0.41913834],
                [0.5056845 ,0.44656885,0.39082012],
                [0.47901127,0.4905731 ,0.44215047],
                [0.52597356,0.4498724 ,0.41309005],
                [0.52677333,0.4614543 ,0.42516038],
                [0.49632552,0.45291817,0.37428424],
                [0.48245466,0.49653423,0.4460592 ],
                [0.4537878 ,0.52024   ,0.42353606],
                [0.48077118,0.49012432,0.4444447 ],
                [0.5196458 ,0.4892485 ,0.41797137],
                [0.49970382,0.51671624,0.45680356],
                [0.46185756,0.51851827,0.43663704],
                [0.48079327,0.49708137,0.44183803],
                [0.5088055 ,0.47934026,0.42476073],
                [0.4726573 ,0.52456754,0.4304315 ],
                [0.46117118,0.5250782 ,0.43567017],
                [0.50192267,0.48558268,0.415989  ],
                [0.5278558,0.4730729,0.4136618],
                [0.47142732,0.52800953,0.42392835],
                [0.457852 ,0.5210805,0.4303803],
                [0.5194653 ,0.48592806,0.4189737 ],
                [0.5269754 ,0.44697925,0.41424483],
                [0.49570984,0.45713657,0.38898155],
                [0.4787251 ,0.4975536 ,0.44798285],
                [0.528054  ,0.44119138,0.41152525],
                [0.5349142 ,0.43478888,0.4009066 ],
                [0.49158517,0.45402628,0.3759737 ],
                [0.49869698,0.5160799 ,0.4613087 ],
                [0.53205305,0.45124838,0.40908083],
                [0.4784394 ,0.49452955,0.45258602],
                [0.5175421,0.4799848,0.4196435],
                [0.5020465,0.5101715,0.4627711],
                [0.46701825,0.52939165,0.44083163],
                [0.4775333 ,0.49488223,0.43930113],
                [0.5238585 ,0.48732182,0.42421702],
                [0.49926272,0.51488405,0.45773044],
                [0.45405844,0.52460235,0.42645296],
                [0.50670147,0.48717886,0.4144663 ],
                [0.51002795,0.4807775 ,0.42142934],
                [0.4662549 ,0.52851534,0.4236977 ],
                [0.45584175,0.523578  ,0.43415368],
                [0.51545304,0.47907242,0.4185964 ],
                [0.5290331 ,0.4856662 ,0.41930008],
                [0.47023243,0.52616477,0.4295933 ],
                [0.48203996,0.49038842,0.4443813 ],
                [0.5321448 ,0.43871903,0.4076716 ],
                [0.5307748 ,0.43729517,0.40393007],
                [0.4789204 ,0.48978138,0.43981525],
                [0.4910435 ,0.5147219 ,0.46201816],
                [0.5294897 ,0.44936305,0.41664472],
                [0.48205703,0.49147838,0.44679642],
                [0.50667787,0.48350725,0.41970116],
                [0.50160974,0.511325  ,0.46272296],
                [0.4599238 ,0.5277902 ,0.43923226],
                [0.47726044,0.49441984,0.45848632],
                [0.52327394,0.48101163,0.4207588 ],
                [0.49696335,0.51085705,0.45847166],
                [0.4558813 ,0.5249037 ,0.43305054],
                [0.5159731 ,0.48871982,0.417582  ],
                [0.5120185 ,0.47914714,0.41696492],
                [0.47242212,0.5275018 ,0.43094242],
                [0.45725453,0.5277883 ,0.4330114 ],
                [0.52705616,0.48251092,0.4212805 ],
                [0.5232834 ,0.47850293,0.41931608],
                [0.57213455,0.527984  ,0.35512975],
                [0.5291734 ,0.50475657,0.35690895],
                [0.49168164,0.48769736,0.43492594],
                [0.54270923,0.52167124,0.40138593],
                [0.548261  ,0.5276773 ,0.39804375],
                [0.5590409 ,0.49765903,0.41581875],
                [0.4952916 ,0.4869828 ,0.42782357],
                [0.53512263,0.5173133 ,0.4038561 ],
                [0.5466602,0.5241897,0.3948211],
                [0.5580126 ,0.5059877 ,0.41010615],
                [0.52749366,0.50969934,0.37737578],
                [0.5428812 ,0.5213638 ,0.39779595],
                [0.5110152 ,0.4891218 ,0.43809345],
                [0.54528975,0.4841574 ,0.4109477 ],
                [0.5162823,0.5031738,0.355462 ],
                [0.5560455 ,0.5341397 ,0.39213234],
                [0.5236236 ,0.49744558,0.4311436 ],
                [0.56250924,0.5287777 ,0.37584   ],
                [0.52995974,0.5065892 ,0.3746152 ],
                [0.5148952 ,0.48112607,0.4429927 ],
                [0.5175704 ,0.48290047,0.44092825],
                [0.56471145,0.5281602 ,0.36215594],
                [0.5245322 ,0.5067947 ,0.35133597],
                [0.5168711 ,0.49254495,0.43467984],
                [0.5564328 ,0.5326128 ,0.39185742],
                [0.54238546,0.5235731 ,0.39671585],
                [0.5589528 ,0.49897382,0.41148147],
                [0.490527  ,0.48594883,0.42625412],
                [0.540777  ,0.5224334 ,0.40269527],
                [0.54819286,0.5213571 ,0.39066193],
                [0.56412935,0.5117966 ,0.41830558],
                [0.49543053,0.48813012,0.42164606],
                [0.54633677,0.5261201 ,0.39983535],
                [0.5137948 ,0.49746594,0.42872375],
                [0.5440645 ,0.48270535,0.42487293],
                [0.5233092,0.5101589,0.3726798],
                [0.5437887 ,0.52428734,0.3985289 ],
                [0.51304257,0.48989847,0.42973468],
                [0.5568933 ,0.49965167,0.42162105],
                [0.51323545,0.50197524,0.3564059 ],
                [0.50926095,0.491219  ,0.4337993 ],
                [0.5090074 ,0.49326938,0.43372422],
                [0.5691711 ,0.53210384,0.36583626],
                [0.50463104,0.5028632 ,0.4321937 ],
                [0.5139656,0.4868945,0.4340509],
                [0.521468  ,0.5055322 ,0.36965117],
                [0.55204135,0.529775  ,0.3978189 ],
                [0.5442095 ,0.47917444,0.41814956],
                [0.4913411 ,0.48428905,0.42128736],
                [0.54057705,0.52165616,0.4048188 ],
                [0.542969  ,0.5237895 ,0.39231393],
                [0.55803096,0.4961661 ,0.41487467],
                [0.4992788 ,0.4859719 ,0.43281344],
                [0.5305109 ,0.51312065,0.39966905],
                [0.5177061 ,0.49181482,0.4365108 ],
                [0.56100094,0.500374  ,0.4148101 ],
                [0.5321914 ,0.5102687 ,0.37858665],
                [0.54586303,0.5255386 ,0.39921242],
                [0.5137093 ,0.4912388 ,0.43136072],
                [0.55987257,0.49206546,0.4071876 ],
                [0.5217634 ,0.5069923 ,0.35778633],
                [0.50890785,0.49157682,0.43661422],
                [0.5215001 ,0.48423928,0.4436417 ],
                [0.5277005 ,0.50694484,0.37002423],
                [0.50316995,0.49247545,0.44039944],
                [0.51309556,0.48097885,0.43928677],
                [0.53060615,0.50830024,0.36918414],
                [0.5194279 ,0.5109395 ,0.37739697],
                [0.5074282 ,0.48691785,0.43145975],
                [0.4979498 ,0.48341078,0.42971912],
                [0.5501516 ,0.52555823,0.3934332 ],
                [0.5461934,0.5262484,0.3939529],
                [0.54908   ,0.48806196,0.42099956],
                [0.5014301 ,0.48589432,0.436662  ],
                [0.53414136,0.51612157,0.40266103],
                [0.54919714,0.5287226 ,0.40181968],
                [0.5576139 ,0.5083272 ,0.41848704],
                [0.5245443 ,0.5074804 ,0.36850137],
                [0.54582417,0.5249395 ,0.39863873],
                [0.510452  ,0.49233088,0.43211973],
                [0.550062 ,0.484843 ,0.4108073],
                [0.52650285,0.506634  ,0.35687348],
                [0.5398924 ,0.5228651 ,0.40054595],
                [0.51519436,0.50460017,0.3732727 ],
                [0.5261406,0.5058537,0.3675862],
                [0.5034788 ,0.49374598,0.4342429 ],
                [0.5210835 ,0.49245325,0.43889055],
                [0.5267564 ,0.50674903,0.35168815],
                [0.5210007 ,0.50835687,0.3772961 ],
                [0.50640184,0.48256546,0.44206938],
                [0.5092295 ,0.4866989 ,0.43480638],
                [0.54194546,0.5196384 ,0.3976506 ],
                [0.54787904,0.526383  ,0.39731565],
                [0.5606286 ,0.49745455,0.42098156],
                [0.49140778,0.48446184,0.42735946],
                [0.54368937,0.52497137,0.39866522],
                [0.5428397 ,0.5185414 ,0.39325285],
                [0.5594457 ,0.50974125,0.41425818],
                [0.49839938,0.48830232,0.4262709 ],
                [0.5487715 ,0.525024  ,0.39215395],
                [0.5369752,0.5727962,0.289967 ],
                [0.59344983,0.52701414,0.29851162],
                [0.5403228 ,0.42664987,0.30071828],
                [0.61390656,0.48400667,0.30862916],
                [0.54412544,0.42704317,0.29425722],
                [0.57293266,0.5165969 ,0.32355246],
                [0.5934436 ,0.58450556,0.31296134],
                [0.53648967,0.5720832 ,0.28960013],
                [0.5356726 ,0.41945648,0.29532433],
                [0.54174125,0.4318745 ,0.29372686],
                [0.58828443,0.59168035,0.30744278],
                [0.5317894 ,0.5712001 ,0.29104343],
                [0.53475857,0.4326871 ,0.2923081 ],
                [0.60522646,0.47987992,0.307118  ],
                [0.59430635,0.5240945 ,0.30544215],
                [0.57407665,0.51538223,0.3271464 ],
                [0.6061692 ,0.47668839,0.30528024],
                [0.6110546 ,0.48892117,0.3058509 ],
                [0.5903514 ,0.5168973 ,0.30553645],
                [0.5746216 ,0.5202943 ,0.32266262],
                [0.61050904,0.48585933,0.30540335],
                [0.537755  ,0.5721727 ,0.29372114],
                [0.593019 ,0.5189615,0.3058478],
                [0.58663183,0.59170264,0.3099348 ],
                [0.6073993 ,0.48592967,0.30104738],
                [0.5392084,0.4329267,0.2896862],
                [0.57267016,0.5192281 ,0.3221293 ],
                [0.5922702,0.5930861,0.3066013],
                [0.5356747,0.5679587,0.2880374],
                [0.5418317 ,0.42581126,0.30429026],
                [0.5458119 ,0.42738768,0.2981344 ],
                [0.59847003,0.5877109 ,0.3095912 ],
                [0.5381277,0.571639 ,0.2919183],
                [0.541775  ,0.43108726,0.2988005 ],
                [0.54334515,0.4330906 ,0.2951963 ],
                [0.59340423,0.58699805,0.309398  ],
                [0.572501  ,0.5164145 ,0.32655787],
                [0.60946584,0.48254946,0.30436087],
                [0.6187052 ,0.49322766,0.30593017],
                [0.58945864,0.5217067 ,0.29878846],
                [0.56703347,0.5157303 ,0.3281963 ],
                [0.6079666 ,0.4903327 ,0.30716673],
                [0.6153798 ,0.48803845,0.30836555],
                [0.5685508 ,0.52199924,0.32524297],
                [0.5958972 ,0.5960222 ,0.30683288],
                [0.6044332 ,0.48358685,0.3013576 ],
                [0.5460339 ,0.43173885,0.29543144],
                [0.56731   ,0.51148707,0.32159904],
                [0.5840745 ,0.5922738 ,0.31072843],
                [0.6018998 ,0.47903857,0.30639032],
                [0.54002774,0.42668828,0.2894247 ],
                [0.5452579 ,0.43116534,0.29990247],
                [0.594424  ,0.59025204,0.30684268],
                [0.52876884,0.56952447,0.29484105],
                [0.5420751 ,0.43026462,0.29226652],
                [0.5367802 ,0.42497653,0.2976374 ],
                [0.59337044,0.58934534,0.30657166],
                [0.5330379 ,0.5682076 ,0.29674092],
                [0.60843235,0.48856384,0.3058983 ],
                [0.622213 ,0.4882856,0.304553 ],
                [0.5903919 ,0.51684546,0.30796424],
                [0.57125235,0.5180771 ,0.32781205],
                [0.6089499 ,0.48680657,0.30467328],
                [0.5768052 ,0.5185299 ,0.31697696],
                [0.5705455 ,0.51886284,0.3190366 ],
                [0.58994913,0.5896897 ,0.30432367],
                [0.6268232 ,0.4940348 ,0.30487725],
                [0.53772116,0.43267733,0.29594907],
                [0.57222605,0.51760834,0.32312977],
                [0.59555805,0.59311426,0.31174678],
                [0.60570174,0.48631483,0.30084708],
                [0.53959066,0.4289581 ,0.298777  ],
                [0.57580924,0.51711005,0.32043356],
                [0.59573525,0.5906094 ,0.31004015],
                [0.5351664 ,0.5695435 ,0.29673266],
                [0.5391933 ,0.43646303,0.2976342 ],
                [0.5430795 ,0.43132824,0.29986432],
                [0.5930048 ,0.59042233,0.30595434],
                [0.5290576 ,0.57188404,0.29016134],
                [0.54226685,0.42294064,0.29932007],
                [0.61532396,0.48213112,0.30440187],
                [0.595832  ,0.5235741 ,0.30807948],
                [0.57278943,0.5113909 ,0.3227653 ],
                [0.60652846,0.48487574,0.30562112],
                [0.56802994,0.5143422 ,0.32356006],
                [0.5749345,0.5215083,0.3248094],
                [0.56010014,0.4581252 ,0.32659376],
                [0.61648715,0.48614496,0.30825546],
                [0.5422058,0.4390608,0.2997141],
                [0.57529193,0.5184185 ,0.3231798 ],
                [0.58442837,0.59203476,0.31206885],
                [0.614521  ,0.488059  ,0.30975547],
                [0.5389163 ,0.4239257 ,0.29656675],
                [0.5688457 ,0.51133305,0.32183135],
                [0.5822921,0.5911697,0.3084111],
                [0.5304123 ,0.5729853 ,0.28753152],
                [0.5381229 ,0.42901266,0.29189098],
                [0.5385551 ,0.42482457,0.3008491 ],
                [0.5926592 ,0.5894364 ,0.31038135],
                [0.5349006 ,0.56785315,0.29295948],
                [0.5904347 ,0.46175423,0.24482176],
                [0.6001269 ,0.4633032 ,0.24985334],
                [0.49659196,0.5074195 ,0.22852993],
                [0.57001   ,0.508016  ,0.27730516],
                [0.5620742 ,0.50816935,0.29550976],
                [0.53743196,0.5002058 ,0.21195981],
                [0.53808916,0.49672005,0.2074154 ],
                [0.5698818,0.5058349,0.2754871],
                [0.56506985,0.50921774,0.2930252 ],
                [0.5312407 ,0.49280018,0.21253853],
                [0.53896415,0.4951122 ,0.2008343 ],
                [0.49146926,0.5090591 ,0.22940598],
                [0.5661614 ,0.5178951 ,0.29353407],
                [0.5900418 ,0.4646515 ,0.24756715],
                [0.5312272 ,0.48882383,0.20622274],
                [0.4967363 ,0.51342446,0.23043978],
                [0.5597846 ,0.5151507 ,0.29771972],
                [0.585526  ,0.46395227,0.25072175],
                [0.6086236,0.4661271,0.2480626],
                [0.4880404,0.5110636,0.2236505],
                [0.51368254,0.49511993,0.24010384],
                [0.60073954,0.46320003,0.23983881],
                [0.59215605,0.45115092,0.24309225],
                [0.50515497,0.49652165,0.23493569],
                [0.5969827 ,0.42118683,0.26584515],
                [0.56460357,0.51518977,0.29314837],
                [0.52791715,0.49852562,0.2197336 ],
                [0.5374556 ,0.50064445,0.2100416 ],
                [0.57178074,0.51227987,0.2776523 ],
                [0.55901414,0.5054953 ,0.2956659 ],
                [0.5379159 ,0.49208978,0.20560132],
                [0.5387022 ,0.4964577 ,0.20396727],
                [0.5005    ,0.52286273,0.22539988],
                [0.5652827 ,0.5109603 ,0.28788438],
                [0.5948277,0.4643221,0.2485917],
                [0.5295512 ,0.49311993,0.22064365],
                [0.5175267,0.5269327,0.2225968],
                [0.56304604,0.51137185,0.2938843 ],
                [0.59341836,0.45426306,0.24602246],
                [0.54146576,0.48472878,0.19762084],
                [0.4970379 ,0.5058787 ,0.23109668],
                [0.50543225,0.4919745 ,0.23660642],
                [0.6059706 ,0.4621961 ,0.24735484],
                [0.5031122 ,0.4875129 ,0.23016044],
                [0.51499486,0.49419084,0.23785345],
                [0.6055369 ,0.43396148,0.26587263],
                [0.5972718 ,0.47698787,0.2429318 ],
                [0.53548235,0.49569893,0.20824735],
                [0.5393732 ,0.4900533 ,0.20096117],
                [0.56275165,0.50637877,0.28440446],
                [0.5645717 ,0.5228817 ,0.29155213],
                [0.5319808 ,0.49618167,0.21096279],
                [0.5341769 ,0.49779248,0.20900771],
                [0.5704638,0.5206791,0.2827574],
                [0.56469715,0.5140031 ,0.29639405],
                [0.58248395,0.46257725,0.24277566],
                [0.54063004,0.49365893,0.20524271],
                [0.48626545,0.5092374 ,0.22951442],
                [0.56211066,0.51196074,0.29936737],
                [0.6108553 ,0.4521755 ,0.24925864],
                [0.5301024 ,0.50070226,0.21248873],
                [0.4910105 ,0.51253206,0.22995248],
                [0.52013165,0.51039886,0.23163073],
                [0.5774219 ,0.4681661 ,0.24104458],
                [0.49446192,0.47543868,0.2367157 ],
                [0.5009884 ,0.4935942 ,0.23453222],
                [0.5800996 ,0.44557637,0.2541461 ],
                [0.6043152 ,0.46135744,0.24550635],
                [0.50328064,0.48780155,0.2383567 ],
                [0.5401828 ,0.48831686,0.20136635],
                [0.5676081 ,0.50149953,0.28432575],
                [0.56081176,0.50984657,0.2900284 ],
                [0.5373265 ,0.49676433,0.2092763 ],
                [0.53311735,0.4970751 ,0.20747265],
                [0.56913775,0.5213554 ,0.2798127 ],
                [0.56152374,0.51537734,0.29283476],
                [0.53668797,0.49848586,0.21278216],
                [0.5340906 ,0.4949645 ,0.21901044],
                [0.4909789,0.515745 ,0.2224957],
                [0.5640415 ,0.5064434 ,0.29269028],
                [0.59483564,0.46449968,0.24953832],
                [0.5326565 ,0.49453294,0.2051225 ],
                [0.5043116 ,0.5129389 ,0.23471965],
                [0.5586613 ,0.51328266,0.29907405],
                [0.61184126,0.46689847,0.24259698],
                [0.50092685,0.48896316,0.23280756],
                [0.52311295,0.48937255,0.23715417],
                [0.5757975 ,0.43790373,0.25600007],
                [0.60484606,0.45365238,0.24658945],
                [0.50891584,0.48185667,0.23777816],
                [0.5048575 ,0.5017628 ,0.22621293],
                [0.6048863 ,0.44755894,0.26441124],
                [0.56115574,0.5207156 ,0.28892908],
                [0.5390506 ,0.49971014,0.21362914],
                [0.53599185,0.49446875,0.20842493],
                [0.5705101,0.5069091,0.2845739],
                [0.5565553 ,0.51395994,0.2962304 ],
                [0.5366141 ,0.49360085,0.20254631],
                [0.5282252 ,0.4915316 ,0.21190755],
                [0.49885893,0.51200944,0.23270786],
            ];



            import * as THREE from 'three';
            import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

            const scene2 = new THREE.Scene();
            const camera2 = new THREE.PerspectiveCamera( 40, (window.innerWidth/3) / window.innerHeight, 0.1, 1000 );

            const renderer = new THREE.WebGLRenderer();
            renderer.setSize( window.innerWidth/3, window.innerHeight );
            document.getElementById("latentSpace").appendChild( renderer.domElement );
            const controls2 = new OrbitControls( camera2, renderer.domElement );

            camera2.position.set(-4,2,2);
            camera2.lookAt(new THREE.Vector3(0,0,0));

            
            const geometry = new THREE.BufferGeometry();
            const positions = [];
            const colors = [];

            const color = new THREE.Color();

            for ( let i = 0; i < 404; i ++ ) {
                // positions
                const x = latentCoordinates[i][0];
                const y = latentCoordinates[i][1];
                const z = latentCoordinates[i][2];
                positions.push( x, y, z );
                // colors
                if (i < 100){
                    color.setRGB( 0,1,0, THREE.SRGBColorSpace );
                } else if(i < 200){
                    color.setRGB( 1,0,0, THREE.SRGBColorSpace );
                } else if(i < 300){
                    color.setRGB( 0,0,1, THREE.SRGBColorSpace );
                } else {
                    color.setRGB( 1,1,1, THREE.SRGBColorSpace );
                }
                colors.push( color.r, color.g, color.b );
            }
            geometry.setAttribute( 'position', new THREE.Float32BufferAttribute( positions, 3 ) );
            geometry.setAttribute( 'color', new THREE.Float32BufferAttribute( colors, 3 ) );
            geometry.computeBoundingSphere();
            geometry.computeBoundingBox();
            const material = new THREE.PointsMaterial( { size: .005, vertexColors: true } );

            const points = new THREE.Points( geometry, material );
            scene2.add( points );
            
            points.position.x -= 0.5;
            points.position.y -= 0.5;
            points.position.z -= 0.5;

            const box = new THREE.BoxHelper( points, 0x808080 );
            scene2.add( box );

            const lp = new THREE.SphereGeometry(.005, 6, 4); 
            const lpm = new THREE.MeshBasicMaterial( { color: 0xffff00 } ); 
            const sphere = new THREE.Mesh( lp, lpm ); 
            scene2.add( sphere );

            function animate() {
                const slidX = document.getElementById("sliderX").value;
                const slidY = document.getElementById("sliderY").value;
                const slidZ = document.getElementById("sliderZ").value;
                
                sphere.position.x = (slidX-.5);
                sphere.position.z = (slidZ-.5);
                sphere.position.y = (slidY-.5);

                requestAnimationFrame( animate );
                renderer.render( scene2, camera2 );
            }
            animate();

        </script>


	</body>
</html>
